<?xml version="1.0" encoding="utf-8"?>
<wdkModel>
  <recordClassSet name="GeneRecordClasses">
    <recordClass name="GeneRecordClass" urlName="gene" displayName="Gene" iconName="fa-google">
      <!-- =================================================================== -->
      <!-- Primary Key -->
      <!-- =================================================================== -->

      <primaryKey aliasQueryRef="GeneAttributes.GeneAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Gene ID" attributeCategory="deep">
        <text>
          <![CDATA[$$source_id$$]]>
        </text>
      </idAttribute>

      <!-- =================================================================== -->
      <!-- Reporters -->
      <!-- =================================================================== -->

      <reporter name="fullRecord" displayName="%%fullReporterDisplayName%%" scopes="record" implementation="org.gusdb.wdk.model.report.reporter.FullRecordReporter"/>

      <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results" implementation="org.gusdb.wdk.model.report.reporter.AttributesTabularReporter">
        <description>%%attributesReporterDescription%%</description>
        <property name="page_size">1000000</property>
      </reporter>

      <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results" implementation="org.gusdb.wdk.model.report.reporter.TableTabularReporter">
        <description>%%tableReporterDescription%%</description>
        <property name="page_size">1000000</property>
      </reporter>

      <!-- <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results" -->
      <!-- implementation="org.apidb.apicommon.model.report.reporter.TranscriptAttributesReporter"> -->
      <!--         <property name="page_size">500</property> -->
      <!--     </reporter> -->

      <reporter name="xml" displayName="XML: choose from columns and/or tables" scopes="" implementation="org.gusdb.wdk.model.report.reporter.XMLReporter">
      </reporter>

      <reporter name="json" displayName="JSON: choose from columns and/or tables" scopes="" implementation="org.gusdb.wdk.model.report.reporter.JSONReporter">
      </reporter>


      <!-- =============================================================== -->
      <!--  Step Analysis Plugins -->
      <!-- =============================================================== -->

      <stepAnalysisRef name="custom-go-enrichment"/>
      <stepAnalysisRef name="gene-expression-heatmap"/>
      <stepAnalysisRef name="gene-network"/>
      <!-- <stepAnalysisRef name="pathway-enrichment" excludeProjects="EuPathDB"/> -->
      <!-- <stepAnalysisRef name="word-enrichment"/> -->


      <!-- =================================================================== -->
      <!-- Attributes -->
      <!-- =================================================================== -->

      <attributeQueryRef ref="GeneAttributes.Basic">
        <columnAttribute name="project_id" internal="true" />
        <columnAttribute displayName="Genomic Sequence ID" name="sequence_id" help="Ensembl sequence ID"/>
        <columnAttribute displayName="Chromosome" name="chromosome" />
        <columnAttribute name="gene_type" displayName="Gene Type" internal="false" help="Gene product category" />
        <columnAttribute name="symbol" displayName="Symbol" removable="false" internal="false" align="center"/>


        <columnAttribute name="product" displayName="Name" internal="false" help="official gene name/protein product for this gene">
          <!-- <plugin name="wordCloud" display="Word Cloud" -->
          <!-- description="Display the terms in the attribute as word clouds" -->
          <!-- implementation="org.apidb.apicommon.model.record.attribute.plugin.ApiWordCloudAttributePlugin" -->
          <!-- view="/wdk/jsp/results/wordCloud.jsp" /> -->
        </columnAttribute>

        <columnAttribute name="exon_count" displayName="# Exons" internal="false" help="total number of exons in this gene" align="center">
          <!-- <plugin name="histogram" display="Histogram" -->
          <!-- description="Display the histogram of the values of this attribute" -->
          <!-- implementation="org.apidb.apicommon.model.record.attribute.plugin.ApiHistogramAttributePlugin" -->
          <!-- view="/wdk/jsp/results/histogram.jsp" /> -->
        </columnAttribute>

        <columnAttribute name="transcript_count" displayName="# Transcripts" align="center" help="total number of transcripts in this gene">
          <!-- <plugin name="histogram" display="Histogram" -->
          <!-- description="Display the histogram of the values of this attribute" -->
          <!-- implementation="org.apidb.apicommon.model.record.attribute.plugin.ApiHistogramAttributePlugin" -->
          <!-- view="/wdk/jsp/results/histogram.jsp" /> -->
        </columnAttribute>

        <linkAttribute name="link" displayName="Gene ID">
          <displayText>
            <![CDATA[ $$symbol$$ ]]>
          </displayText>
          <url>
            <![CDATA[ app/record/gene/$$source_id$$ ]]>
          </url>
        </linkAttribute>

        <columnAttribute name="start_min" displayName="Start Location" internal="true" />
        <columnAttribute name="start_min_text" displayName="Start Location" internal="true" />
        <columnAttribute name="end_max" displayName="End Location" internal="true" />
        <columnAttribute name="end_max_text" displayName="End Location" internal="true" />
        <columnAttribute name="strand_plus_minus" displayName="Strand" internal="true" />
        <columnAttribute name="chromosomal_location" displayName="Chromosomal Location" />
        <columnAttribute name="chromosomal_location_overview" internal="true" inReportMaker="false"/>

        <textAttribute name="location_text" displayName="Genomic Location" help="Contig/Chromosome:start-end(strand)">
          <display>
            <![CDATA[
		     $$sequence_id$$:$$start_min_text$$-$$end_max_text$$($$strand_plus_minus$$)
            ]]>
          </display>
          <text>
            <![CDATA[
		     $$sequence_id$$:$$start_min_text$$-$$end_max_text$$:$$strand_plus_minus$$
            ]]>
          </text>
        </textAttribute>

        <columnAttribute name="organism_abbrev" displayName="Organism" inReportMaker="true" internal="false"/>
        <columnAttribute name="organism_full" displayName="Organism (Species)" internal="false" inReportMaker="true" />
        <columnAttribute name="ncbi_tax_id" displayName="NCBI Taxonomy Id" internal="true" />
        <columnAttribute name="organism_common" displayName="Organism (Common Name)" internal="false" inReportMaker="true" />

        <columnAttribute name="gene_family" displayName="Gene Family" internal="true" inReportMaker="true" />
        <columnAttribute name="gene_family_id" internal="true" inReportMaker="false" />
        <textAttribute name="gene_family_link" displayName="Gene Family" internal="false" inReportMaker="false" truncateTo="5000">
          <text>
	    $$gene_family$$
	                                        <![CDATA[<a href="@GENE_FAMILY_URL@=$$gene_family_id$$">$$gene_family$$</a>]]>
          </text>
        </textAttribute>


      </attributeQueryRef>

      <attributeQueryRef ref="GeneAttributes.Synonyms">
	<columnAttribute name="synonym" internal="false" displayName="Synonyms" />
      </attributeQueryRef>



      <attributeQueryRef ref="GeneAttributes.Ortholog">
        <columnAttribute name="ortholog_taxon" internal="true" inReportMaker="false"/>
        <columnAttribute name="ortholog_source_id" internal="true" inReportMaker="true" displayName="Ortholog (Ensembl ID)" help="ortholog (Ensembl) in human or mouse"/>
        <columnAttribute name="ortholog_symbol" internal="true" inReportMaker="true" displayName="Ortholog (Symbol)" help="ortholog (Symbol) in human or mouse"/>

        <textAttribute name="ortholog_record_link" displayName="Ortholog(s)" truncateTo="5000">
          <text><![CDATA[<a href="$$ortholog_source_id$$">$$ortholog_symbol$$</a> ($$ortholog_taxon$$)]]></text>
        </textAttribute>
      </attributeQueryRef>

      <!-- =================================================================== -->
      <!-- Tables -->
      <!-- =================================================================== -->

      <table name="Transcripts" displayName="Transcripts" inReportMaker="false" queryRef="GeneTables.Transcripts">
        <columnAttribute name="transcript_id" displayName="Transcript" internal="true" inReportMaker="true"/>
        <linkAttribute name="transcript_link" displayName="Transcript" inReportMaker="false">
          <displayText>$$transcript_id$$</displayText>
          <url>
            <![CDATA[@ENSEMBL_TRANSCRIPT_URL@$$transcript_id$$]]>
          </url>
        </linkAttribute>
        <columnAttribute name="transcript_length" displayName="Length"/>
        <columnAttribute name="transcript_exon_count" displayName="# Exons"/>
      </table>

      <table name="GeneLinkOuts" displayName="Genes" inReportMaker="false" queryRef="GeneTables.DbRefs_Gene">
        <columnAttribute name="external_id" displayName="External ID" internal="false"/>
        <columnAttribute name="external_links" displayName="Resources" internal="false" truncateTo="5000"/>
      </table>

      <table name="SequenceLinkOuts" displayName="Nucleotide Sequences" inReportMaker="false" queryRef="GeneTables.DbRefs_NSeq">
        <columnAttribute name="external_id" displayName="External ID" internal="false"/>
        <columnAttribute name="external_links" displayName="Resources" internal="false" truncateTo="5000"/>
      </table>

      <table name="ProteinLinkOuts" displayName="Proteins" inReportMaker="false" queryRef="GeneTables.DbRefs_Proteins">

        <columnAttribute name="external_id" displayName="External ID" internal="false"/>
        <columnAttribute name="external_links" displayName="Resources" internal="false" truncateTo="5000"/>

      </table>

      <table name="ClinicalLinkOuts" displayName="Clinical" inReportMaker="false" queryRef="GeneTables.DbRefs_Clinical">
        <columnAttribute name="external_id" displayName="External ID" internal="false"/>
        <columnAttribute name="external_links" displayName="Resources" internal="false" truncateTo="5000"/>

      </table>

      <!-- =================================================================== -->
      <!-- Functional Annotation -->
      <!-- =================================================================== -->

      <table name="GOTerms" displayName="GO Terms" queryRef="GeneTables.GO">
        <columnAttribute name="ontology" displayName="Ontology"/>
        <columnAttribute name="go_term" displayName="Term" internal="true" inReportMaker="true"/>
        <columnAttribute name="definition" internal="true" inReportMaker="false"/>
        <textAttribute name="go_term_display" displayName="Term" inReportMaker="false">
          <text>
            <![CDATA[<span class="wdk-tooltip" title="$$definition$$">$$go_term$$</span>]]>
          </text>
        </textAttribute>
        <columnAttribute name="go_id" displayName="GO ID" internal="true" inReportMaker="true"/>
        <linkAttribute name="go_id_link" displayName="GO ID" inReportMaker="false" help="view term at AmiGO">
          <displayText>$$go_id$$</displayText>
          <url>
            <![CDATA[@AMIGO_TERM_URL@$$go_id$$]]>
          </url>
        </linkAttribute>
        <columnAttribute name="evidence_code" displayName="Evidence Code" help="The evidence code reflects the type of work or analysis described in the cited reference which supports the association of the GO term to the gene product. More information on evidence codes can be found on http://www.geneontology.org/page/guide-go-evidence-codes."/>
      </table>

      <!-- =================================================================== -->
      <!-- Proteomics -->
      <!-- =================================================================== -->

      <table name="MassSpecMod" displayName="Post Translational Modifications" inReportMaker="false" queryRef="GeneTables.MassSpecMod">

        <columnAttribute displayName="Protein ID" name="protein_id" internal="true"/>
        <linkAttribute displayName="Protein ID" name="protein_link" inReportMaker="false">
          <displayText>
	    $$protein_id$$
          </displayText>
          <url>
            <![CDATA[@UNIPROT_RECORD_URL@$$protein_id$$]]>
          </url>
        </linkAttribute>
        <columnAttribute name="peptide" displayName="Peptide" align="center"/>
        <columnAttribute name="modification_type" displayName="Modification Type"/>
        <columnAttribute name="modification_site" displayName="Modification Site" align="center"/>
        <columnAttribute name="experiment" displayName="Experiment"/>

        <columnAttribute name="molecular_weight" displayName="kD" help="translated molecular weight of the assigned protein"/>
        <columnAttribute name="charge" displayName="Charge" help="observed charge state for the protein"/>
        <columnAttribute name="mass_to_charge_ratio" displayName="m/Z" help="calculated mass to charge ratio of the peptide determined from the primary amino acid sequence and the associated modifications"/>

      </table>

      <table name="MassSpecComparison" displayName="Comparisons" inReportMaker="true" queryRef="GeneTables.MassSpecComparison">
        <columnAttribute name="comparison" displayName="Comparison" help="comparison labeled as alternative versus reference condition"/>
        <columnAttribute displayName="Protein ID" name="protein_id" internal="true"/>
        <linkAttribute displayName="Protein ID" name="protein_link" inReportMaker="false">
          <displayText>
	    $$protein_id$$
          </displayText>
          <url>
            <![CDATA[@UNIPROT_RECORD_URL@$$protein_id$$]]>
          </url>
        </linkAttribute>
        <columnAttribute name="peptide" displayName="Peptide" align="center"/>
        <columnAttribute name="alt_mean_intensity" displayName="Alternative MI" help="mean intensity over alternative condition replicates"/>
        <columnAttribute name="ref_mean_intensity" displayName="Reference MI" help="mean intensity over reference condition replicates"/>
        <columnAttribute name="fold_change" displayName="Fold Change" help="fold change calculated as Alt MI / Ref MI"/>
        <columnAttribute name="adj_fold_change" displayName="Median Adj FC" help="log2-median adjusted fold change"/>
      </table>



      <!-- =================================================================== -->
      <!-- Transcriptomics -->
      <!-- =================================================================== -->

 <!--- ontogeny /palis -->
      <table name="MicroarrayComparisons" displayName="Comparisons" inReportMaker="true" queryRef="GeneTables.MicroarrayComparison">
        <columnAttribute name="cell_or_lineage" displayName="Lineage/Cell" help="erythrocyte lineage or cell stage"/>
        <columnAttribute name="ref_condition" displayName="Reference" help="reference condition for the comparison"/>
        <columnAttribute name="ref_mean_expression" displayName="Log2 Ref Mean" help="log2 mean mRNA expression over reference condition replicates"/>
        <columnAttribute name="alt_condition" displayName="Alternative" help="alternative condition for the comparison"/>
        <columnAttribute name="alt_mean_expression" displayName="Log2 Alt Mean" help="log2 mean mRNA expression over alternative condition replicates"/>
        <columnAttribute name="fold_change" displayName="Log2 Fold Change" help="log2 fold change"/>
        <columnAttribute name="adj_p_value" displayName="Adj p-value" help="Benjamini-Hochberg adjusted p-value"/>
        <columnAttribute name="confidence_interval" displayName="Conf. Interval" help="[lower, upper] 95% confidence interval on fold change.  Most useful for interpreting fold changes less/greater than +/-2.  If the interval is broad or lower and upper limits have opposing signs, then the there is less confidence in the fold change value."/>
        <columnAttribute name="dataset_id" displayName="Dataset" internal="true" inReportMaker="true"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="true"/>
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="/@WEBAPP@/app/record/dataset/$$dataset_id$$">$$dataset_name$$</a>]]></text>
        </textAttribute>

      </table>

      <table name="ExpressionProfile" displayName="Expression" inReportMaker="false" queryRef="GeneTables.ExpressionProfile">
        <columnAttribute name="dataset_id" internal="true" displayName="Dataset" inReportMaker="false"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="false"/>
        <columnAttribute name="dataset_description" displayName="Dataset Description" internal="true" inReportMaker="false" />
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="../dataset/$$dataset_id$$" title ="$$dataset_description$$">$$dataset_name$$</a>]]></text>
        </textAttribute>
        <columnAttribute name="avg_gene_profile" displayName="Average Gene Expression" help="profile of per condition gene expression, averaged across replicates and reporters" inReportMaker="false" />
        <columnAttribute name="gene_profile" displayName="Gene Expression" help="profile of per sample gene expression, averaged across reporters" inReportMaker="false"/>
        <columnAttribute name="reporter_profile" displayName="Reporter Expression" help="profile of per sample reporter expression"/>
      </table>

      <!--- ontogeny /palis -->
      <table name="palis_comparison" displayName="Comparisons" inReportMaker="true" queryRef="GeneTables.MicroarrayComparison">
        <columnAttribute name="cell_or_lineage" displayName="Lineage/Cell" help="erythrocyte lineage or cell stage"/>
        <columnAttribute name="ref_condition" displayName="Reference" help="reference condition for the comparison"/>
        <columnAttribute name="ref_mean_expression" displayName="Log2 Ref Mean" help="log2 mean mRNA expression over reference condition replicates"/>
        <columnAttribute name="alt_condition" displayName="Alternative" help="alternative condition for the comparison"/>
        <columnAttribute name="alt_mean_expression" displayName="Log2 Alt Mean" help="log2 mean mRNA expression over alternative condition replicates"/>
        <columnAttribute name="fold_change" displayName="Log2 Fold Change" help="log2 fold change"/>
        <columnAttribute name="adj_p_value" displayName="Adj p-value" help="Benjamini-Hochberg adjusted p-value"/>
        <columnAttribute name="confidence_interval" displayName="Conf. Interval" help="[lower, upper] 95% confidence interval on fold change.  Most useful for interpreting fold changes less/greater than +/-2.  If the interval is broad or lower and upper limits have opposing signs, then the there is less confidence in the fold change value."/>
        <columnAttribute name="dataset_id" displayName="Dataset" internal="true" inReportMaker="true"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="true"/>
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="/@WEBAPP@/app/record/dataset/$$dataset_id$$">$$dataset_name$$</a>]]></text>
        </textAttribute>

      </table>

      <table name="palis_profiles" displayName="Expression" inReportMaker="false" queryRef="GeneTables.ExpressionProfile">
        <columnAttribute name="dataset_id" internal="true" displayName="Dataset" inReportMaker="false"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="false"/>
        <columnAttribute name="dataset_description" displayName="Dataset Description" internal="true" inReportMaker="false" />
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="../dataset/$$dataset_id$$" title ="$$dataset_description$$">$$dataset_name$$</a>]]></text>
        </textAttribute>
        <columnAttribute name="avg_gene_profile" displayName="Average Gene Expression" help="profile of per condition gene expression, averaged across replicates and reporters" inReportMaker="false" />
        <columnAttribute name="gene_profile" displayName="Gene Expression" help="profile of per sample gene expression, averaged across reporters" inReportMaker="false"/>
        <columnAttribute name="reporter_profile" displayName="Reporter Expression" help="profile of per sample reporter expression"/>
      </table>

  <!-- epo stages -->
 <table name="epo_stages_comparison" displayName="Comparisons" inReportMaker="true" queryRef="GeneTables.MicroarrayComparison">
        <columnAttribute name="cell_or_lineage" displayName="Lineage/Cell" help="erythrocyte lineage or cell stage"/>
        <columnAttribute name="ref_condition" displayName="Reference" help="reference condition for the comparison"/>
        <columnAttribute name="ref_mean_expression" displayName="Log2 Ref Mean" help="log2 mean mRNA expression over reference condition replicates"/>
        <columnAttribute name="alt_condition" displayName="Alternative" help="alternative condition for the comparison"/>
        <columnAttribute name="alt_mean_expression" displayName="Log2 Alt Mean" help="log2 mean mRNA expression over alternative condition replicates"/>
        <columnAttribute name="fold_change" displayName="Log2 Fold Change" help="log2 fold change"/>
        <columnAttribute name="adj_p_value" displayName="Adj p-value" help="Benjamini-Hochberg adjusted p-value"/>
        <columnAttribute name="confidence_interval" displayName="Conf. Interval" help="[lower, upper] 95% confidence interval on fold change.  Most useful for interpreting fold changes less/greater than +/-2.  If the interval is broad or lower and upper limits have opposing signs, then the there is less confidence in the fold change value."/>
        <columnAttribute name="dataset_id" displayName="Dataset" internal="true" inReportMaker="true"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="true"/>
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="/@WEBAPP@/app/record/dataset/$$dataset_id$$">$$dataset_name$$</a>]]></text>
        </textAttribute>

      </table>



      <table name="epo_stages_profiles" displayName="Expression" inReportMaker="false" queryRef="GeneTables.ExpressionProfile">
        <columnAttribute name="dataset_id" internal="true" displayName="Dataset" inReportMaker="false"/>
        <columnAttribute name="dataset_name" displayName="Dataset Name" internal="true" inReportMaker="false"/>
        <columnAttribute name="dataset_description" displayName="Dataset Description" internal="true" inReportMaker="false" />
        <textAttribute name="dataset" displayName="Dataset" inReportMaker="false" truncateTo="5000">
          <text><![CDATA[<a href="../dataset/$$dataset_id$$" title ="$$dataset_description$$">$$dataset_name$$</a>]]></text>
        </textAttribute>
        <columnAttribute name="avg_gene_profile" displayName="Average Gene Expression" help="profile of per condition gene expression, averaged across replicates and reporters" inReportMaker="false" />
        <columnAttribute name="gene_profile" displayName="Gene Expression" help="profile of per sample gene expression, averaged across reporters" inReportMaker="false"/>
        <columnAttribute name="reporter_profile" displayName="Reporter Expression" help="profile of per sample reporter expression"/>
      </table>

    </recordClass>
  </recordClassSet>
</wdkModel>
